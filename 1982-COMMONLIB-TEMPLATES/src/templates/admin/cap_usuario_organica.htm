<html>
<head>
<title>Asignaci&oacute;n de Trabajadores a Org&aacute;nica</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<script language="JavaScript" src="../servlet/Tool?scripts/links.js" type="text/JavaScript"></script>
<script language="JavaScript" src="../servlet/Tool?scripts/jquery-1.3.2.js" type="text/JavaScript"></script>
<script language="JavaScript" src="../servlet/Tool?scripts/shadowbox/shadowbox.js" type="text/JavaScript"></script>
<link href="../servlet/Tool?scripts/shadowbox/shadowbox.css" rel="stylesheet" type="text/css">
<script type="text/javascript">

	function openOrganica() {
		var win = window.open("TreeView?js=treeview.event.openerListener.js","OrganicaJquery","scrollbars=1,location=0,status=0,scrollbars=0, width=500,height=500");
		
	}

	function jqTreeViewClick(id,nombre) {
		$("#selUnidad").val(id);
	}

	function AbrirAlfabeticOrganica() {
	    var url2 = "../servlet/S_SearchAlfabeticOrganica?Operacion=1";
		ventmsg2 = open(url2, "organica", "width=465,height=360,left=130,top=150");
	}

</script>
<script language="JavaScript">
<!--

<!--
function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);


function grabarUserOrg(){
var i=0;
 if (document.formulario.user){
   if ((document.formulario.user.value!="") && (document.formulario.selUnidad.value!="-1")){
		if(confirm('&#191;Est&#225; seguro de Asignar la nueva Unidad Seleccionada')){
			document.formulario.grabar.value="si";
			document.formulario.submit();
		}	
	}else alert("Debe Seleccionar la Nueva Unidad para el usuario.");
  }	
}


function grabarUser(){
var i=0;
//validar password
 if (document.formulario.user){
   if (document.formulario.user.value!=""){
		if (validar()){
			//alert("si");
			document.formulario.grabar.value="si";
			document.formulario.submit();
		}else
			<if nuevo=="no">
				if (confirm("Debe Seleccionar la(s) Aplicacion(es) para el usuario.\n &#191;Desea elminar el usuario?")){
					document.formulario.grabar.value="del"; //elimina el usuario del modelo
                    //alert("bien aca");
					document.formulario.submit();			
				}
           <else><if pass!="">
			   	     alert("Debe Seleccionar la(s) Aplicacion(es) para el usuario.");
                 <else>i=1;
                 </if>   
           </if>
    }
  }else alert("Antes de grabar, debe buscar un usuario.");
}


function validar(){
	var valor=false;
	if (!document.formulario.checkbox_1.checked)
		document.formulario.checkbox_1.checked=true;
     
	if(document.formulario.pass1.value!=""){
		if (document.formulario.pass1.value==document.formulario.pass2.value){
			for (x=1;x<=9 ; x++){
				//alert(eval('document.formulario.checkbox_'+x+'.checked'));
				if (eval('document.formulario.checkbox_'+x)) {
					if (eval('document.formulario.checkbox_'+x+'.checked')==true)
						valor=true;
				}
			}
		}
		else
			alert("Error, Confirme su password.")
	}
	else
		alert("Error, Ingrese su password.")
	//alert("validar: "+valor);
	return valor;
}
function Inicio(){
	<if nuevo=="no">document.formulario.grabar.value="no";</if>
	<if pass!="">document.formulario.pass1.value="${pass}";document.formulario.pass2.value="${pass}";
                   LayerApp.style.visibility="visible";
   </if>
	<if app>
		<list app as p>if (eval('document.formulario.checkbox_${p.orden}')) document.formulario.checkbox_${p.orden}.checked=true;</list>
	</if>	
	<if GetParam("pRut")>
		var iFrame = document.getElementById("fichaPersonal");
		iFrame.src="../servlet/InfoRut?rut=${GetParam("pRut")}"
	</if>
	<if passok || addok || delok >MM_showHideLayers('LayerMensaje','','show')</if>
	
}

function confportalrrhh(rut){
<if nuevo=="no">
	if (rut!=""  && document.formulario.checkbox_1.checked==true){
	var url = "../servlet/PerfilUser?pRut="+rut+"&app_id=sh";
	var win = open(url, "portalrrhh", "toolbar=no,status=yes,resizable=no,width=790,height=510,left=5,top=5");
	win.focus();
	}
</if>
}
function confDataFolder(rut){
<if nuevo=="no">
	var url=""; 
	var accion = "M";
	//alert(rut);	
	if (rut!="" && document.formulario.checkbox_2.checked==true){
		url = "../servlet/MantenerUsuario?rut="+rut+"&accion="+accion+"&unidad=${unid_id}&empresa=${emp_id}";
		//alert(url);
		var win = open(url, "MantUsuario", "width=645,height=360,resizable=no,toolbar=no");
		win.focus();
	}
</if>	
}
function confWorkFlow(rut){
<if nuevo=="no">
if (rut!=""  && document.formulario.checkbox_6.checked==true){
	var url = "../servlet/PerfilUser?pRut="+rut+"&app_id=wfv";
	var win = open(url, "workflow", "toolbar=no,status=no,resizable=no,width=385,height=200");
	win.focus();
	}
</if>
}

function MM_showHideLayers() { //v3.0
  var i,p,v,obj,args=MM_showHideLayers.arguments;
  for (i=0; i<(args.length-2); i+=3) if ((obj=MM_findObj(args[i]))!=null) { v=args[i+2];
    if (obj.style) { obj=obj.style; v=(v=='show')?'visible':(v='hide')?'hidden':v; }
    obj.visibility=v; }
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}
//-->
</script>
<link href="../servlet/Tool?style/portalrrhh.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
#Layer2 {
	position:absolute;
	left:13px;
	top:6px;
	width:464px;
	height:27px;
	z-index:7;
}
-->
</style>
</head>

<body background="../servlet/Tool?images/new/main/main_admin.jpg" text="#000000" onLoad="Inicio();MM_preloadImages('../servlet/Tool?images/new/botones/cerrar_f2.gif','../servlet/Tool?images/new/botones/grabar_f2.gif','../servlet/Tool?images/new/botones/graf_f2.gif','../servlet/Tool?images/new/botones/orga_f2.gif','../servlet/Tool?images/new/botones/alfa_f2.gif')" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<form name="formulario" method="post" action="../servlet/CapUserOrg">
<div id="Layer1" style="position:absolute; width:94px; height:22px; z-index:1; left: 350px; top: 47px"> 
  <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <!-- fwtable fwsrc="bck_main.jpg" fwbase="desp_admin.jpg" fwstyle="Dreamweaver" fwdocid = "742308039" fwnested="0" -->
    <tr> 
      <!-- td> 
        <div align="left"><a href="javascript:;" onClick="AbrirBGaleria();return false;" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('desp_admin_r3_c2','','../servlet/Tool?images/new/botones/graf_f2.gif',1)"><img name="desp_admin_r3_c2" src="../servlet/Tool?images/new/botones/graf.gif" width="91" height="21" border="0"></a></div>
      </td-->
        
      <td><a href="javascript:;" onClick="AbrirAlfabeticOrganica();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('desp_admin_r3_c7','','../servlet/Tool?images/new/botones/alfa_f2.gif',1)"><img name="desp_admin_r3_c7" src="../servlet/Tool?images/new/botones/alfa.gif" width="91" height="21" border="0"></a></td>
        
      <!-- td colspan="2"> 
        <div align="center"><a href="javascript:;" onClick="AbrirBOrganica();return false;" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('desp_admin_r3_c4','','../servlet/Tool?images/new/botones/orga_f2.gif',1)"><img name="desp_admin_r3_c4" src="../servlet/Tool?images/new/botones/orga.gif" width="91" height="21" border="0"></a></div>
      </td-->
      </tr>
  </table>
</div>
<div id="Layer3" style="position:absolute; width:310px; z-index:6; left: 480px; top: 8px"> 
          <table width="100%" border="0" cellspacing="1" cellpadding="0">
            <tr valign="top"> 
              <td height="12" colspan="2" align="center" class="titulo">
                  <input type="hidden" name="pass_ant" value="${pass}">
                  <input type="hidden" name="nuevo" value="${nuevo}">
                  <input type="hidden" name="grabar">
                  <input type="hidden" name="pRut" value="${GetParam("pRut")}">
				  <input type="hidden" name="dig" value="${dig}">
				  <input type="hidden" name="nombre" value="${nombre}">
                  Trabajador Org&aacute;nica
                  <div id="LayerModo" style="position:absolute; width:23px; height:19px; z-index:5; visibility: hidden; color: #FFFFFF;"> 
                    <input type="hidden" name="modo" value="1">
              </div>              </td>
            </tr>
            <tr valign="middle"> 
              <td width="125" class="tituloTabla">Rut:</td>
              <td height="15" align="left">  
              <input type="text" name="user" value="${user}-${dig}" readonly="true" class="detalleTablaChico" style="width:200px"></td>
            </tr>
            <tr valign="middle"> 
              <td width="125" class="tituloTabla">Nombre:</td>
              <td height="15" align="left"> 
              <input type="text" name="nombre"  value="${nombre}" class="detalleTablaChico" readonly="true" maxlength="40" style="width:200px"></td>
            </tr>
            <tr valign="middle"> 
              <td width="125" class="tituloTabla">Cargo:</td>
              <td height="15" align="left"> 
              <input type="text" name="cargo"  value="${cargo}" class="detalleTablaChico" readonly="true" maxlength="40" style="width:200px"></td>
            </tr>
            <tr valign="middle"> 
              	<td width="125" class="tituloTabla">&Aacute;rea Pert. Actual:</td>
           		<td height="15" align="left">  
              		<input type="text" name="unidad"  value="${unidad}" class="detalleTablaChico" readonly="true" maxlength="40" style="width:200px">
             	</td>
            </tr>
            <tr valign="middle"> 
              	<td width="125" class="tituloTabla">&Aacute;rea Pert. Nueva:</td>
              	
              	<td class="tituloTabla"><a href="javascript:;openOrganica();" title="Org&#225;nica" class="option" rel="shadowbox;player=html;width=300;height=340">Buscar Unidad</a></td>
            </tr>
            <tr>
            	<td height="15" align="left" colspan="2"> 
                <select name="selUnidad" id="selUnidad" class="detalleTablaChico" style="width:300" >
        	      <option value="-1">Seleccionar</option>
            	  <list unidadedes as i> 
	              	<option value="${i.codigo}">${i.nombre}</option>
	              </list> 
              </select></td>
            </tr>
		    
            <tr valign="top"> 
              <td colspan="2"> 
                <table width="100%" border="0" cellpadding="0">
                  <tr> 
                    <td align="center">                     
                      <a href="javascript:;" onClick="grabarUserOrg();return false;" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('desp_admin_r7_c11','','../servlet/Tool?images/new/botones/grabar_f2.gif',1)"><img name="desp_admin_r7_c11" src="../servlet/Tool?images/new/botones/grabar.gif" width="91" height="21" border="0"></a></td>
                    <td align="center"> 
 <a href="javascript:window.close();" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image11','','../servlet/Tool?images/new/botones/cerrar_f2.gif',1)"><img src="../servlet/Tool?images/new/botones/cerrar.gif" name="Image11" width="91" height="21" border="0" id="Image11"></a></td>
                  </tr>
              </table>              </td>
            </tr>
    </table>
  </div>
<div id="LayerMensaje" style="position:absolute; width:410px; height:340px; z-index:6; left: 42px; top: 83px; visibility: hidden; background-color: #FFFFFF; layer-background-color: #FFFFFF; border: 1px none #000000;"> 
  <table width="100%" border="0" class="tablas">
    <tr> 
      <td align="center">Resultado de la Operaci&oacute;n</td>
    </tr>
  </table>
    
  <table width="100%" border="0" class="titulo" height="312">
    <if passok> 
    <tr align="left" valign="top"> 
        
      <td colspan="2" align="center">${passok}</td>
    </tr>
    </if> <if addok> 
      <tr align="left" valign="top"> 
        
      <td colspan="2" align="center">${addok}</td>
      </tr>
      </if> <if delok> 
      <tr align="left" valign="top"> 
        
      <td colspan="2" align="center">${delok}</td>
      </tr>
      </if> 
      <tr align="left" valign="top"> 
        
      <td colspan="2" height="177"></td>
      </tr>
      <tr align="left" valign="top" height="54"> 
        
      <td colspan="2" align="center"><a href="javascript:;" onClick="MM_showHideLayers('LayerMensaje','','hide');" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image1','','../servlet/Tool?images/new/botones/cerrar_f2.gif',1)"><img src="../servlet/Tool?images/new/botones/cerrar.gif" width="91" height="21" border="0" name="Image1"></a></td>
      </tr>	  	  
  </table>
</div>
 <iframe  name="fichaPersonal" id="fichaPersonal" src="about:blank" style="position:absolute; left:44px; top:84px; width:404px; height:341px; z-index:2; visibility: visible; overflow: auto"></iframe>
</form>
</body>
</html>
