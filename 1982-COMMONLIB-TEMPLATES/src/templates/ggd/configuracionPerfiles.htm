<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Configuracion de Perfiles</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script language="JavaScript" type="text/JavaScript">
<!--
function MM_reloadPage(init) {  //reloads the window if Nav4 resized
  if (init==true) with (navigator) {if ((appName=="Netscape")&&(parseInt(appVersion)==4)) {
    document.MM_pgW=innerWidth; document.MM_pgH=innerHeight; onresize=MM_reloadPage; }}
  else if (innerWidth!=document.MM_pgW || innerHeight!=document.MM_pgH) location.reload();
}
MM_reloadPage(true);
//-->
</script>
<style type="text/css">
<!--
body {
	background-color: #CCCCCC;
	margin-left: 0px;
	margin-top: 0px;
	margin-right: 0px;
	margin-bottom: 0px;
}
body,td,th {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	color: #FFFFFF;
	font-size: 10px;
}
.Estilo1 {color: #000000}
#Layer9 {
	position:absolute;
	left:13px;
	top:12px;
	width:321px;
	z-index:5;
}
#Layer11 {
	position:absolute;
	left:13px;
	top:96px;
	width:320px;
	z-index:6;
}
#Layer13 {
	position:absolute;
	left:425px;
	top:12px;
	width:371px;
	z-index:7;
}
#Layer14 {
	position:absolute;
	left:14px;
	top:226px;
	width:344px;
	z-index:8;
}
#Layer15 {
	position:absolute;
	left:424px;
	top:226px;
	width:378px;
	z-index:9;
}
#Layer16 {
	position:absolute;
	left:331px;
	top:185px;
	width:66px;
	height:31px;
	z-index:10;
}
#Layer17 {
	position:absolute;
	left:921px;
	top:184px;
	width:30px;
	height:33px;
	z-index:11;
}
#Layer17a {
	position:absolute;
	left:951px;
	top:184px;
	width:30px;
	height:33px;
	z-index:11;
}
#Layer17b {
	position:absolute;
	left:891px;
	top:184px;
	width:30px;
	height:33px;
	z-index:11;
}
#Layer18 {
	position:absolute;
	left:343px;
	top:462px;
	width:29px;
	height:29px;
	z-index:12;
}
#Layer18a {
	position:absolute;
	left:375px;
	top:462px;
	width:29px;
	height:29px;
	z-index:12;
}
#Layer19 {
	position:absolute;
	left:908px;
	top:462px;
	width:70px;
	height:30px;
	z-index:13;
}
-->
</style></head>
<script language="JavaScript" type="text/JavaScript">
function fnTraerComboCriticidad(nivel, competencia){
	form1.action="../servlet/configuracionPerfil?id_proceso="+document.form1.procesos.value+"&id_perfil="+document.form1.perfil.value+"&nivel="+nivel+"&competencia="+competencia;
	form1.submit();
}
function fnTraerCombo(opcion){
	if(opcion.name == "procesos"){
		form1.action="../servlet/configuracionPerfil?id_proceso="+opcion.value;
		form1.submit();
	}
}
function fnEnviar(opcion){
	if(opcion.name == "perfil"){
		form1.action="../servlet/configuracionPerfil?id_proceso=${proceso}&id_perfil="+opcion.value;
		form1.submit();
	}
	if(opcion == "CR_perfil"){
	    url = "../servlet/crearPerfil?id_proceso=${proceso}";
	    //alert(url);
	    window.open(url,'Crear','status=yes,width=345,height=417');
	}
	if(opcion == "EL_perfil"){
	    form1.action= "../servlet/configuracionPerfil?id_proceso=${proceso}&id_perfil=${perfil}&txtAccion=EL&opcionEL=3";
	    form1.submit();
	}
	if(opcion == "AC_perfil"){
		form1.action="../servlet/crearPerfil?pHtm=ggd/updatePerfiles.htm&id_perfil=${perfil}&id_proceso=${proceso}&txtAccion="+opcion.name;
	}
	if(opcion.name == "GR_cargos"){
		form2.action="../servlet/configuracionPerfil?";
		form2.submit();
	}
	if(opcion == "ASOC_cargo")
	{  url = "../servlet/asociarCargo?id_proceso=${proceso}&id_perfil=${perfil}&Accion=1";
	   window.open(url,'Asociar','status=yes,width=378,height=417');
	}
	if(opcion == "NOASOC_cargo")
	{  var largo = document.form2.cargos.length;
  	   var cc = 0;
	   for (i = 0;i<largo; i++) 
	     if(document.form2.cargos[i].checked) cc+=1;
	   if(cc==0) alert("Selecione al menos un cargo");
	   else 
	   {  form2.action="../servlet/configuracionPerfil?id_proceso=${id_proceso}&perfil=${id_perfil}&txtAccion=EL&opcionEL=2";
		  form2.submit();
	   }
	}
	if(opcion == "ASOC_conductas")
	{  var largo = document.form3.competencias.length;
  	   var cc = 0, ccvalor=0;
	   for (i = 0;i<largo; i++) 
	   {  if(document.form3.competencias[i].checked) 
	      {  cc+=1; ccvalor = document.form3.competencias[i].value; }
	   }
	   if(cc!=1) alert("Debe seleccionar una Competencia solamente");
	   else 
	   {  url = "../servlet/asociarCargo?id_proceso=${proceso}&id_perfil=${perfil}&id_competencia="+ccvalor+"&Accion=3";
	      window.open(url,'Asociar','status=yes,width=400,height=407');
	   }
	}
	
	if(opcion == "ASOC_competencias"){
	    url = "../servlet/asociarCargo?id_proceso=${proceso}&id_perfil=${perfil}&Accion=2";
	    window.open(url,'Asociar','status=yes,width=400,height=407');
	}
	if(opcion == "NOASOC_competencias")
	{  var largo = document.form3.competencias.length;
  	   var cc = 0;
	   for (i = 0;i<largo; i++) 
	     if(document.form3.competencias[i].checked) cc+=1;
	   if(cc==0) alert("Debe seleccionar al menos una Competencia");
	   else 
	   {  form3.action="../servlet/configuracionPerfil?id_proceso=${id_proceso}&perfil=${id_perfil}&txtAccion=EL&opcionEL=1";
		  form3.submit();
	   }   
	}	
	if(opcion == "GR_competencias"){
		form3.action="../servlet/configuracionPerfil?";
		form3.submit();
	}
	if(opcion == "GR_criticidad"){
		form4.action="../servlet/configuracionPerfil?id_perfil=${perfil}&id_proceso=${proceso}&txtAccion="+opcion+"&procesos=${proceso}&perfil=${perfil}";
		form4.submit();
	}
}
function fnInicio(){
<if proceso>
<if procesos>
	<list procesos as p>
			<if proceso == p.id_proceso>
					document.form1.procesos.value='${p.id_proceso}';
			</if>
        </list>
</if>
</if>
<if perfil>
<if perfiles_proceso>
	<list perfiles_proceso as p>
			<if perfil == p.id_perfil>
					document.form1.perfil.value='${p.id_perfil}';
			</if>
        </list>
</if>
</if>
}
function fnReload(){
	window.reload();
}
</script>
<link href="../servlet/Tool?style/ggd.css" rel="stylesheet" type="text/css" />
<body onLoad="fnInicio()" background="../servlet/Tool?images/ggd/competencias/configuracion.jpg">
<div id="Layer1" style="position:absolute; width:357px; height:78px; z-index:1; left: 22px; top: 28px; visibility: visible;"> 
  <form name="form1"  method="post">

    <div id="Layer5" style="position:absolute; width:393px; height:24px; z-index:5; left: -10px; top: 4px;"> 
    <select name="procesos" class="campo_texto" onChange="fnTraerCombo(this)">
	  <option value="0">Seleccione Proceso</option>
      <if procesos><list procesos as p> 
      <if proceso == p.id_proceso> <assign proceso_elegido="selected">
      <else> <assign proceso_elegido=""> </if>
      <option value="${p.id_proceso}" ${proceso_elegido}>${p.proceso}</option>
      </list></if>
    </select></div>
    <div id="Layer6" style="position:absolute; width:392px; height:52px; z-index:5; left: -10px; top: 86px;"> 
      <select name="perfil" class="campo_texto" onChange="fnEnviar(this)">
            <option value="0">Seleccione Perfil</option>
            <if perfiles_proceso><list perfiles_proceso as p> 
            <if perfil == p.id_perfil> <assign perfil_elegido="selected">
            <else> <assign perfil_elegido=""> </if>
            <option value="${p.id_perfil}" ${perfil_elegido}>${p.perfil}</option>
            
    </list></if></select></div>
    <div class="txt_gris_bold" id="Layer7" style="position:absolute; width:390px; height:37px; z-index:5; left: -10px; top: 25px; visibility: visible; overflow: visible;">
    <if perfilProceso>
    Inicio: ${perfilProceso.fecha_inicio}<br> 
    T&eacute;rmino: ${perfilProceso.fecha_termino}</if>
    </div>
  </form>
</div>

<div id="Layer2" style="position:absolute; width:362px; height:108px; z-index:2; left: 11px; top: 291px;"> 
  <form name="form2"  method="post">
<input name="id_perfil" type="hidden"  id="id_perfil" value="${id_perfil}">
<input name="id_proceso" type="hidden"  id="id_proceso" value="${id_proceso}">
<input name="txtAccion" type="hidden"  id="txtAccion" value="GR">
<span id="Layer10" style="position:absolute; width:392px; height:157px; z-index:5; left: 1px; top: -45px; overflow: auto;"> 
    <table width="100%" border="0" cellpadding="0" cellspacing="1">
<if perfilCargos>
    	<list perfilCargos as c>
			<tr>
			  <td width="6%" class="fondo_tablaGris"><input type="checkbox" name="cargos" value="${c.id_cargo}-${c.empresa}"></td>
				<td width="94%" class="fondo_tablaGris">  ${c.empresa} - ${c.cargo}</td>
			</tr>
        </list>
</if></table>
</span>
  </form>
</div>

<div id="Layer4" style="position:absolute; width:381px; height:111px; z-index:4; left: 422px; top: 291px;"> 
  <form name="form4"  method="post">
<input name="id_perfil" type="hidden"  id="id_perfil" value="${id_perfil}">
<input name="id_proceso" type="hidden"  id="id_proceso" value="${id_proceso}">
<input name="txtAccion" type="hidden"  id="txtAccion" value="AC">
<span id="Layer12" style="position:absolute; width:565px; height:159px; z-index:5; left: -1px; top: -44px; overflow: auto;"> 
    <table>
        <if perfilCompetencias> <list perfilCompetencias as p> 
        <tr>
				<td width="220" valign="top" class="fondo_tablaGris">${p.competencia}</td>
				<td valign="top">
				<select name="nivel_esperado" class="campo_texto" onChange="fnTraerComboCriticidad(this.value, ${p.id_competencia})">
					<option value="${p.nivel_esperado}">${p.nivel_esperado}</option>
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
				</select>
				
				</td>
				<td valign="top">
				<select name="criticidad" class="campo_texto">
					<list p.factores as j>
						<option value="${j.factor_id}" ${j.selected}>${j.factor_desc}</option>
					</list>
				</select>
				</td>
		</tr>	
		</list>
</if>
</table>
</span>
  </form>
</div>

<div id="Layer3" style="position:absolute; width:377px; height:123px; z-index:3; left: 419px; top: 29px;"> 

<form name="form3"  method="post">
<input name="id_perfil" type="hidden"  id="id_perfil" value="${id_perfil}">
<input name="id_proceso" type="hidden"  id="id_proceso" value="${id_proceso}">
<input name="txtAccion" type="hidden"  id="txtAccion" value="AC">
<span id="Layer8" style="position:absolute; width:565px; height:136px; z-index:5; overflow: auto; left: 2px; top: 1px;"> 
    <table width="100%" border="0" cellpadding="0" cellspacing="1">
<if competencias>
    	<list competencias as c>
			<tr>
			  <td width="6%" class="fondo_tablaGris"><input type="checkbox" name="competencias" value="${c.id_competencia}"></td>
				<td width="94%" class="fondo_tablaGris">${c.competencia}</td>
			</tr>
        </list>
</if>
</table></span>
  </form>
</div>
<div class="txt_gris_bold" id="Layer9">Seleccionar Proceso </div>
<div class="txt_gris_bold" id="Layer11">Perfil de Competencias </div>
<div class="txt_gris_bold" id="Layer13">Diccionario de Competencias </div>
<div class="txt_gris_bold" id="Layer14">Cargos</div>
<div class="txt_gris_bold" id="Layer15">Competencias</div>
<div id="Layer16">
<a href="#" onClick="fnEnviar('CR_perfil');return false"><img name="cfg_perfiles_r6_c8" src="../servlet/Tool?images/images_ggd/ggd/botones/evaluacion.gif" width="30" height="30" border="0" title="CREAR PERFILES"></a>
<a href="#" onClick="fnEnviar('EL_perfil');return false"><img name="cfg_perfiles_r6_c8" src="../servlet/Tool?images/images_ggd/ggd/botones/eliminar.gif" width="30" height="30" border="0" title="ELIMINAR PERFIL"></a></div>

<div id="Layer17"><a href="#" onClick="fnEnviar('ASOC_competencias');return false"><img src="../servlet/Tool?images/images_ggd/ggd/botones/crear.gif" alt="Agregar Competencia" title="Agregar Competencia" name="cfg_perfiles_r12_c161" width="30" height="30" border="0" id="cfg_perfiles_r12_c161"></a></div>
<div id="Layer17a"><a href="#" onClick="fnEnviar('NOASOC_competencias');return false"><img src="../servlet/Tool?images/images_ggd/ggd/botones/enviar.gif" alt="Desasociar Competencia" title="Desasociar Competencia" name="cfg_perfiles_r12_c161" width="30" height="30" border="0" id="cfg_perfiles_r12_c161"></a></div>
<div id="Layer17b"><a href="#" onClick="fnEnviar('ASOC_conductas');return false"><img src="../servlet/Tool?images/images_ggd/ggd/botones/editar.gif" alt="Asociar Conducta" title="Asociar Conducta" name="cfg_perfiles_r12_c161" width="30" height="30" border="0" id="cfg_perfiles_r12_c161"></a></div>

<div id="Layer18"><a href="#" onClick="fnEnviar('ASOC_cargo');return false"><img src="../servlet/Tool?images/images_ggd/ggd/botones/crear.gif" alt="Agregar Cargo" title="Agregar Cargo" name="cfg_perfiles_r12_c162" width="30" height="30" border="0" id="cfg_perfiles_r12_c162"></a></div>
<div id="Layer18a"><a href="#" onClick="fnEnviar('NOASOC_cargo');return false"><img src="../servlet/Tool?images/images_ggd/ggd/botones/enviar.gif" alt="Desasociar Cargo" title="Desasociar Cargo" name="cfg_perfiles_r12_c162" width="30" height="30" border="0" id="cfg_perfiles_r12_c162"></a></div>

<div id="Layer19">
<a href="#" onClick="fnEnviar('GR_criticidad');return false"><img name="cfg_perfiles_r12_c16" src="../servlet/Tool?images/images_ggd/ggd/botones/grabar.gif" width="30" height="30" border="0" title="Grabar Competencias" alt="Grabar Competencias"></a>
&nbsp;<a href="javascript:window.parent.bottomFrame.location='../servlet/WithSession?pHtm=ggd/menu/desp_evalu.htm'"><img name="pperfiles_r13_c13" src="../servlet/Tool?images/images_ggd/ggd/botones/cerrar.gif" width="30" height="30" border="0" alt="CERRAR"></a></div
>
</body>
</html>