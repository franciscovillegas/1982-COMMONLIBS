/*
 * File: app/view/login/loginfalso.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.login.loginfalso', {
    extend: 'Ext.window.Window',
    alias: 'widget.loginloginfalso',

    requires: [
        'MyApp.view.login.loginfalsoViewModel',
        'Ext.form.field.Text',
        'Ext.button.Button'
    ],

    viewModel: {
        type: 'loginloginfalso'
    },
    autoShow: true,
    height: 154,
    id: 'login.loginfalso',
    resizable: false,
    width: 400,
    layout: 'absolute',
    title: '- Identificaci&oacute;n -',
    defaultListenerScope: true,

    items: [
        {
            xtype: 'textfield',
            x: 50,
            y: 20,
            id: 'usuario',
            width: 270,
            fieldLabel: 'Usuario',
            labelWidth: 50
        },
        {
            xtype: 'textfield',
            x: 50,
            y: 50,
            id: 'clave',
            width: 270,
            fieldLabel: 'Clave',
            labelWidth: 50,
            inputType: 'password'
        },
        {
            xtype: 'button',
            x: 160,
            y: 90,
            width: 90,
            text: 'Ingresar',
            listeners: {
                click: 'onButtonClick'
            }
        }
    ],
    listeners: {
        show: 'onloginfalsoShow'
    },

    onButtonClick: function(button, e, eOpts) {
        var usuario = Ext.getCmp("usuario").getValue();
        var clave   = Ext.getCmp("clave").getValue();

        console.log("tryLogin >>u:"+usuario+ " c:"+clave);

        if("c.gonzalez@disecomchile.com" == usuario && "c.gonzalez" == clave) {
            MyApp.app.getController("main").loginAdministrador();

        }
        else {
             Ext.Msg.alert('Identificacion', 'Usuario o clave inv√°lidos.');
        }
    },

    onloginfalsoShow: function(component, eOpts) {
        if(MyApp.app.getController("main").isInvitado()) {
            MyApp.app.getController("main").loginNormal();
        }

    }

});