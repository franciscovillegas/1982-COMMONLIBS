<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Configurar Liquidación adicional</title>
<script language="JavaScript" src="../servlet/Tool?scripts/links.js" type="text/JavaScript"></script>
<script src="../servlet/Tool?scripts/google/googleanalitycs.js" type="text/javascript"></script>
<script src="../servlet/Tool?scripts/jquery-1.3.2.js" type="text/javascript"></script>
<script type="text/javascript">
	trackea("${googleAnalytics}");
</script>
<script type="text/javascript">
	function aLaDerecha() {
		$("#selectIzq option").each(function() {
			if(this.selected == true) {
				$("#selectDer").append(this);
			}
		});
	}
	
	function aLaIzquierda() {
		$("#selectDer option").each(function() {
			if(this.selected == true) {
				$("#selectIzq").append(this);
			}
		});
	}
	
	function guardar() {
		var str = "";
		
		$("#selectDer option").each(function() {
			str += this.value + ",";
		});
		
		$.ajax({
			  url: "../servlet/EjeCore?claseweb=portal.com.eje.liquidadic.SAdmLiqAdicional",
			  data: {"accion":"guardar","tipos":str},
			  type: "get",
			  success: function(data) {
				  var msg = "";
				  
				  if(data == "true") {
					  msg = "accion realizada correctamente...";
				  }
				  else {
					  msg = "error desconocido...";
				  }
				  
				  $("#msg").html(msg).show().hide(4000);
			  },
			  dataType: 'html'
			});
	}
	
	function inicio() {
		<if sintablas>
			var sintablas = true;
		<else>
			var sintablas = false;
		</if>
		
		if(sintablas) {
			if(confirm("Actualmente no existen las tablas necesarias ¿desea crearlas?")) {
				$.ajax({
					  url: "../servlet/EjeCore?claseweb=portal.com.eje.liquidadic.SAdmLiqAdicional",
					  data: {"accion":"creartablas"},
					  type: "get",
					  success: function(data) {
						  var msg = "";
						  
						  if(data == "true") {
							  msg = "accion realizada correctamente...";
						  }
						  else {
							  msg = "error desconocido...";
						  }
						  
						  $("#msg").html(msg).show().hide(4000);
					  },
					  dataType: 'html'
					});
			}
		}
		
	}
</script>
</head>
<body onload="inicio();">
	<table >
		<tr>
			<td style="width: 10px" rowspan="2"></td>
			<td></td>
			<td style="width: 20px"></td>
			<td></td>
			<td style="width: 10px" rowspan="2"></td>
		</tr>
		<tr>
			<td>
				<select size="18" style="width: 200px;" multiple="multiple" id="selectIzq" name="selectIzq">
					<list allProcesos as p>
						<option value="${p.tipo_proceso}">${p.tipo_proceso}</option>
					</list>
				</select>
			</td>
			<td>
				<input type="button" value=">>>" onclick="aLaDerecha();"/> <br/>
				<input type="button" value="<<<" onclick="aLaIzquierda();"/>
			</td>
			<td>
				<select size="18" style="width: 200px" multiple="multiple" id="selectDer" name="selectDer">
					<list procesosSeleccionados as p>
						<option value="${p.tipo_proceso}">${p.tipo_proceso}</option>
					</list>
				</select>
			</td>
		</tr>
		<tr>
			<td colspan="5"></td>
		</tr>
		<tr>
			<td colspan="5" align="left">
				<input type="button" value="guardar" onclick="guardar();"/>

				<div id="msg"></div>
			</td>
		</tr>
	</table>
	
</body>
</html>